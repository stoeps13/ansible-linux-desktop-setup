---
# tasks file for roles/gnome
# Copy desktop wallpaper
- name: Copy desktop wallpaper to pictures
  ansible.builtin.copy:
    src: jeremy-bishop-h7bQ8VEZtws-unsplash.jpg
    dest: "{{ ansible_env.HOME }}/.local/share/backgrounds/wallpaper.jpg"

# Activate wallpaper
- name: Set wallpaper image
  community.general.dconf:
    key: "/org/gnome/desktop/background/picture-uri"
    value: "\"file://{{ ansible_env.HOME }}/.local/share/backgrounds/wallpaper.jpg\""
- name: Set wallpaper image dark
  community.general.dconf:
    key: "/org/gnome/desktop/background/picture-uri-dark"
    value: "\"file://{{ ansible_env.HOME }}/.local/share/backgrounds/wallpaper.jpg\""

- name: Activate wallpaper
  community.general.dconf:
    key: "/org/gnome/desktop/screensaver/picture-uri"
    value: "\"file://{{ ansible_env.HOME }}/.local/share/backgrounds/wallpaper.jpg\""

- name: Activate compose key, enable Euro sign on e and disable caps lock
  community.general.dconf:
    key: "/org/gnome/desktop/input-sources/xkb-options"
    value: "['caps:none', 'eurosign:e', 'compose:ralt']"

- name: Print key starts flameshot
  block:
    - name: Add custom custom-keybindings
      community.general.dconf:
        key: "/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings"
        value: "['/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0']"
    - name: Add Value Print
      community.general.dconf:
        key: "/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/binding"
        value: "'Print'"
    - name: Set flameshot command
      community.general.dconf:
        key: "/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/command"
        value: "'/usr/bin/flameshot gui'"
    - name: Set Custom name
      community.general.dconf:
        key: "/org/gnome/settings-daemon/plugins/media-keys/custom-keybindings/custom0/name"
        value: "'Flameshot'"
